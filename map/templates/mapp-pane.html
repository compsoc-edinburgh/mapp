{% block content %}

<div class="row justify-content-center mapp-pane-header pt-4 pb-3 pb-sm-4">
  <div class="col-md-8 d-flex flex-column flex-sm-row justify-content-between align-items-center">
    <div class="d-flex flex-column flex-sm-row align-items-center">
      <!-- Name of the room -->
      <h2 class="mr-2 d-sm-inline text-center">{{ room.name }}</h2>

      <!-- Availability counter -->
      <h2 class="d-sm-inline">
        <span class={% if low_availability %} "text-warning" {% else %} "text-success" {% endif %}>
          {{ num_free }}
        </span>
        <span class="muted">/ {{ num_machines }}</span>
      </h2>
    </div>

    {% if last_update %}
    <span class="pull-right muted small hidden-xs pt-2 pt-sm-0" title="Last update performed at {{ last_update }}">
      <i class="fa fa-clock-o"></i> {{ last_update }}</span>
    {% endif %}
  </div>
</div>

<div class="row mapp-pane-body flex-column flex-lg-row">
  <div class="col-lg-3 col-xl-2 mapp-pane-friends">
    <p class="ml-1 my-3 d-flex justify-content-between">
      <strong>Friends</strong>
      {% if current_user.is_authenticated %}
      <a href="#" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#friendsModal">Manage</a>
      {% endif %}
    </p>
    <table class="table table-sm">
      <thead>
        <tr>
          <th class="border-top-0">
            <small class="text-secondary text-uppercase"><strong>in this room</strong></small>
          </th>
        </tr>
      </thead>
      <tbody>
        {% for friend in friends %}
          {% if friend.here %}
          <tr>
              <td>{{ friend.name }}</td>
          </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>

    <table class="table table-sm">
      <thead>
        <tr>
          <th class="border-top-0">
            <small class="text-secondary text-uppercase"><strong>everywhere</strong></small>
          </th>
        </tr>
      </thead>
      <tbody>
        {% for friend in friends %}
          <tr>
            <td>
              {% if friend.here %}
                <strong>{{ friend.name }}</strong>
              {% else %}
                <a href="/site/{{ friend.room_key }}">{{ friend.name }}</a>
              {% endif %}
              <small>{{ friend.room_name }}</small>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>
  <div class="col-lg-9 col-xl-10 mapp-pane-inner">
    <div class="tabwrapwrap" style="font-size: 1em" id="mapscroll">
      <div class="tabwrap">
        {% include "mapp-pane-inner-table.html" %}
      </div>
    </div>
  </div>
</div>
<!-- #ajax-map-replace -->

{% endblock %}
  
